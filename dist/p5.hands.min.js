!function(){"use strict";var t=null,i=null,n=[],e=[],r=[],o=!1,p=!1,s=.3,d=!0,h=null,f=640,u=480,a={wrist:0,thumb_cmc:1,thumb_mcp:2,thumb_ip:3,thumb_tip:4,index_finger_mcp:5,index_finger_pip:6,index_finger_dip:7,index_finger_tip:8,middle_finger_mcp:9,middle_finger_pip:10,middle_finger_dip:11,middle_finger_tip:12,ring_finger_mcp:13,ring_finger_pip:14,ring_finger_dip:15,ring_finger_tip:16,pinky_finger_mcp:17,pinky_finger_pip:18,pinky_finger_dip:19,pinky_finger_tip:20},y={thumb:"thumb_tip",index:"index_finger_tip",middle:"middle_finger_tip",ring:"ring_finger_tip",pinky:"pinky_finger_tip"},l={thumb:"thumb_ip",index:"index_finger_pip",middle:"middle_finger_pip",ring:"ring_finger_pip",pinky:"pinky_finger_pip"},g=["thumb","index","middle","ring","pinky"],c={thumb:[255,100,100],index:[255,180,50],middle:[100,255,100],ring:[100,150,255],pinky:[200,100,255]},m={thumb:[0,1,2,3,4],index:[0,5,6,7,8],middle:[0,9,10,11,12],ring:[0,13,14,15,16],pinky:[0,17,18,19,20]},v=[[5,9],[9,13],[13,17],[0,5],[0,17]];function _(t){if(t&&"object"==typeof t&&t.keypoints)return t;var i=s>0?e:n;if(!i||0===i.length)return null;var r="string"==typeof t&&/^(left|right|l|r)$/i.test(t);if("any"===(t=(t||"right").toLowerCase())||"first"===t)return i[0];var o=t.startsWith("l")?"Left":"Right",p=i.find(function(t){return t.handedness===o});return p||1!==i.length||r?p||null:i[0]}function k(t,i){if(!t||!t.keypoints)return null;y[i]&&(i=y[i]);var n=a[i];return void 0!==n&&t.keypoints[n]?t.keypoints[n]:t.keypoints.find(function(t){return t.name===i})||null}function x(t,i){if(!t||!i)return 1/0;var n=t.x-i.x,e=t.y-i.y;return Math.sqrt(n*n+e*e)}function b(t,i,n){return t+(i-t)*n}function w(t){r=s>0?e.map(function(t){return JSON.parse(JSON.stringify(t))}):n.map(function(t){return JSON.parse(JSON.stringify(t))}),function(t){if(s<=0||!t)e=t;else{for(var i=1-s,n=[],r=0;r<t.length;r++){var o=t[r],p=e.find(function(t){return t.handedness===o.handedness});if(p&&p.keypoints){for(var d=JSON.parse(JSON.stringify(o)),h=0;h<d.keypoints.length;h++)p.keypoints[h]&&(d.keypoints[h].x=b(p.keypoints[h].x,o.keypoints[h].x,i),d.keypoints[h].y=b(p.keypoints[h].y,o.keypoints[h].y,i));n.push(d)}else n.push(JSON.parse(JSON.stringify(o)))}e=n}}(n=t||[])}p5.prototype.loadHands=function(i){h=this,s=void 0!==(i=i||{}).smoothing?i.smoothing:.3,f=i.width||640,u=i.height||480;var n={maxHands:i.maxHands||2};d=void 0===i.flipped||!!i.flipped,n.flipped=d,i.runtime&&(n.runtime=i.runtime),i.modelType&&(n.modelType=i.modelType);var e=this;t=ml5.handPose(n,function(){o=!0,t.getConnections&&t.getConnections(),e._decrementPreload&&e._decrementPreload()})},p5.prototype.registerPreloadMethod("loadHands",p5.prototype),p5.prototype.startHands=function(n){h=this;var e=(n=n||{}).width||f,r=n.height||u;i||((i=this.createCapture(this.VIDEO)).size(e,r),i.hide()),t&&!p&&(t.getConnections&&t.getConnections(),t.detectStart(i,w),p=!0)},p5.prototype.initHands=function(n){h=this,s=void 0!==(n=n||{}).smoothing?n.smoothing:.3,f=n.width||640,u=n.height||480;var e={maxHands:n.maxHands||2};d=void 0===n.flipped||!!n.flipped,e.flipped=d,n.runtime&&(e.runtime=n.runtime),n.modelType&&(e.modelType=n.modelType),(i=this.createCapture(this.VIDEO)).size(f,u),i.hide(),t=ml5.handPose(e,function(){o=!0,t.getConnections&&t.getConnections(),t.detectStart(i,w),p=!0})},p5.prototype.stopHands=function(){t&&p&&(t.detectStop(),p=!1)},p5.prototype.getHands=function(){return s>0?e:n},p5.prototype.getHand=function(t){return _(t)},p5.prototype.handDetected=function(t){return null!==_(t)},p5.prototype.handCount=function(){return(s>0?e:n).length},p5.prototype.handsReady=function(){return o&&p},p5.prototype.getHandsVideo=function(){return i},p5.prototype.getPoint=function(t,i){return void 0!==i||"string"!=typeof t||/^(left|right|l|r|any|first)$/i.test(t)||(i=t,t=void 0),k(_(t),i)},p5.prototype.fingerTip=function(t,i){void 0===i&&-1!==g.indexOf(t)&&(i=t,t=void 0);var n=_(t),e=y[i];return e?k(n,e):null},p5.prototype.wristPoint=function(t){return k(_(t),"wrist")},p5.prototype.palmCenter=function(t){var i=_(t);if(!i||!i.keypoints)return null;for(var n=[a.wrist,a.index_finger_mcp,a.middle_finger_mcp,a.ring_finger_mcp,a.pinky_finger_mcp],e=0,r=0,o=0,p=0;p<n.length;p++){var s=i.keypoints[n[p]];s&&(e+=s.x,r+=s.y,o++)}return o?{x:e/o,y:r/o}:null},p5.prototype.handCenter=function(t){var i=_(t);if(!i||!i.keypoints||!i.keypoints.length)return null;for(var n=0,e=0,r=0;r<i.keypoints.length;r++)n+=i.keypoints[r].x,e+=i.keypoints[r].y;return{x:n/i.keypoints.length,y:e/i.keypoints.length}},p5.prototype.getFingerPoints=function(t,i){void 0===i&&-1!==g.indexOf(t)&&(i=t,t=void 0);var n=_(t);if(!n||!n.keypoints)return[];var e=m[i];return e?e.slice(1).map(function(t){return n.keypoints[t]}).filter(Boolean):[]},p5.prototype.isFingerUp=function(t,i){void 0===i&&-1!==g.indexOf(t)&&(i=t,t=void 0);var n=_(t);if(!n||!n.keypoints)return!1;var e=n.keypoints[a.wrist],r=k(n,y[i]),o=k(n,l[i]);return!!(r&&o&&e)&&x(r,e)>x(o,e)},p5.prototype.fingersUp=function(t){for(var i={},n=0;n<g.length;n++)i[g[n]]=this.isFingerUp(t,g[n]);return i},p5.prototype.countFingers=function(t){for(var i=0,n=0;n<g.length;n++)this.isFingerUp(t,g[n])&&i++;return i},p5.prototype.isPinching=function(t,i){"number"==typeof t&&(i=t,t=void 0),i=i||40;var n=_(t);return x(k(n,"thumb_tip"),k(n,"index_finger_tip"))<i},p5.prototype.pinchAmount=function(t,i,n){"number"==typeof t&&(n=i,i=t,t=void 0),i=i||15,n=n||100;var e=_(t),r=x(k(e,"thumb_tip"),k(e,"index_finger_tip"));return r===1/0?0:Math.max(0,Math.min(1,(n-r)/(n-i)))},p5.prototype.pinchPoint=function(t){var i=_(t),n=k(i,"thumb_tip"),e=k(i,"index_finger_tip");return n&&e?{x:(n.x+e.x)/2,y:(n.y+e.y)/2}:null},p5.prototype.isGrabbing=function(t,i){"number"==typeof t&&(i=t,t=void 0),i=i||90;var n=_(t);if(!n||!n.keypoints)return!1;var e=n.keypoints[a.wrist];if(!e)return!1;for(var r=0,o=0,p=0;p<g.length;p++){var s=k(n,y[g[p]]);s&&(r+=x(s,e),o++)}return o>=3&&r/o<i},p5.prototype.isOpenHand=function(t){return this.countFingers(t)>=5},p5.prototype.isPointing=function(t){var i=this.fingersUp(t);return i.index&&!i.middle&&!i.ring&&!i.pinky},p5.prototype.isPeace=function(t){var i=this.fingersUp(t);return i.index&&i.middle&&!i.ring&&!i.pinky},p5.prototype.isThumbsUp=function(t){var i=this.fingersUp(t);return i.thumb&&!i.index&&!i.middle&&!i.ring&&!i.pinky},p5.prototype.isRockOn=function(t){var i=this.fingersUp(t);return i.index&&i.pinky&&!i.middle&&!i.ring},p5.prototype.isShaka=function(t){var i=this.fingersUp(t);return i.thumb&&i.pinky&&!i.index&&!i.middle&&!i.ring},p5.prototype.isGun=function(t){var i=this.fingersUp(t);return i.thumb&&i.index&&!i.middle&&!i.ring&&!i.pinky},p5.prototype.isThree=function(t){var i=this.fingersUp(t);return i.index&&i.middle&&i.ring&&!i.pinky},p5.prototype.isShowingNumber=function(t,i){"number"==typeof t&&(i=t,t=void 0);var n=this.fingersUp(t),e=[n.index,n.middle,n.ring,n.pinky].filter(Boolean).length;return 5===i?4===e&&n.thumb:0===i?0===e&&!n.thumb:e===i&&!n.thumb},p5.prototype.handDist=function(t,i,n,e){if(t&&"object"==typeof t&&i&&"object"==typeof i&&void 0===n){var r=x(t,i);return r===1/0?null:r}var o=x(this.getPoint(t,i),this.getPoint(n,e));return o===1/0?null:o},p5.prototype.handSize=function(t){var i=_(t);if(!i||!i.keypoints)return null;var n=x(i.keypoints[a.wrist],i.keypoints[a.middle_finger_tip]);return n===1/0?null:n},p5.prototype.handAngle=function(t){var i=_(t);if(!i||!i.keypoints)return null;var n=i.keypoints[a.wrist],e=i.keypoints[a.middle_finger_mcp];return n&&e?Math.atan2(e.y-n.y,e.x-n.x):null},p5.prototype.pointVelocity=function(t,i){void 0!==i||"string"!=typeof t||/^(left|right|l|r|any|first)$/i.test(t)||(i=t,t=void 0),i=i||"wrist";var n=_(t),e=k(n,i),o=n?n.handedness:"Right",p=r.find(function(t){return t.handedness===o}),s=p?k(p,i):null;if(!e||!s)return null;var d=e.x-s.x,h=e.y-s.y;return{x:d,y:h,speed:Math.sqrt(d*d+h*h)}},p5.prototype.handSwipe=function(t,i){"number"==typeof t&&(i=t,t=void 0),i=i||12;var n=this.pointVelocity(t,"wrist");return!n||n.speed<i?"none":Math.abs(n.x)>Math.abs(n.y)?n.x>0?"right":"left":n.y>0?"down":"up"},p5.prototype.mapHandPoint=function(t){return t&&i&&h?{x:t.x/i.width*h.width,y:t.y/i.height*h.height}:t},p5.prototype.drawVideo=function(){i&&(d?(this.push(),this.translate(this.width,0),this.scale(-1,1),this.image(i,0,0,this.width,this.height),this.pop()):this.image(i,0,0,this.width,this.height))},p5.prototype.drawHands=function(t){for(var i=s>0?e:n,r=0;r<i.length;r++)this.drawOneHand(i[r],t)},p5.prototype.drawOneHand=function(t,i){var n="string"==typeof t?_(t):t;if(n&&n.keypoints){var e=(i=i||{}).size||8,r=!1!==i.skeleton,o=!1!==i.landmarks,p=!1!==i.colorByFinger,s=i.labels||!1,d=i.strokeWeight||2,h=i.color||[255,255,255],f=i.strokeColor||[255,255,255,150],u=n.keypoints;if(this.push(),r){this.strokeWeight(d);for(var a=0;a<g.length;a++){var y=g[a],l=p?c[y]:f;this.stroke(l[0],l[1],l[2],void 0!==l[3]?l[3]:150);for(var k=m[y],x=0;x<k.length-1;x++){var b=u[k[x]],w=u[k[x+1]];b&&w&&this.line(b.x,b.y,w.x,w.y)}}this.stroke(f[0]||255,f[1]||255,f[2]||255,100);for(var O=0;O<v.length;O++){var S=u[v[O][0]],N=u[v[O][1]];S&&N&&this.line(S.x,S.y,N.x,N.y)}}if(o){this.noStroke();for(var H=0;H<u.length;H++){var P=u[H];if(P){if(p){for(var C=h,E=0;E<g.length;E++)if(0!==H&&-1!==m[g[E]].indexOf(H)){C=c[g[E]];break}this.fill(C[0],C[1],C[2])}else this.fill(h[0],h[1],h[2]);this.circle(P.x,P.y,e),s&&(this.fill(255),this.textSize(8),this.textAlign(this.LEFT,this.TOP),this.text(P.name||H,P.x+e,P.y))}}}this.pop()}},p5.prototype.drawLandmarks=function(t,i){"object"!=typeof t||null===t||t.keypoints||(i=t,t=void 0);var n=Object.assign({},i,{skeleton:!1});t?this.drawOneHand(t,n):this.drawHands(n)},p5.prototype.drawSkeleton=function(t,i){"object"!=typeof t||null===t||t.keypoints||(i=t,t=void 0);var n=Object.assign({},i,{landmarks:!1});t?this.drawOneHand(t,n):this.drawHands(n)},p5.prototype.drawFinger=function(t,i,n){void 0===i&&-1!==g.indexOf(t)&&(i=t,t=void 0);var e=_(t);if(e&&e.keypoints){var r=(n=n||{}).size||10,o=n.color||c[i]||[255,255,255],p=n.strokeWeight||3,s=e.keypoints,d=m[i];if(d){this.push(),this.stroke(o[0],o[1],o[2]),this.strokeWeight(p);for(var h=0;h<d.length-1;h++){var f=s[d[h]],u=s[d[h+1]];f&&u&&this.line(f.x,f.y,u.x,u.y)}this.noStroke(),this.fill(o[0],o[1],o[2]);for(var a=1;a<d.length;a++){var y=s[d[a]];y&&this.circle(y.x,y.y,r)}this.pop()}}},p5.prototype.drawHandsStatus=function(){this.push(),this.textAlign(this.CENTER,this.CENTER),o?0===(s>0?e:n).length&&(this.fill(255,255,255,160),this.textSize(16),this.text("Show your hand to the camera",this.width/2,this.height-30)):(this.fill(255),this.textSize(20),this.text("Loading hand tracking...",this.width/2,this.height/2)),this.pop()},p5.Hands={KEYPOINTS:a,FINGER_NAMES:g,TIP_NAMES:y,PIP_NAMES:l,MCP_NAMES:{thumb:"thumb_mcp",index:"index_finger_mcp",middle:"middle_finger_mcp",ring:"ring_finger_mcp",pinky:"pinky_finger_mcp"},FINGER_COLORS:c,FINGER_CONNECTIONS:m,PALM_CONNECTIONS:v,dist:x}}();